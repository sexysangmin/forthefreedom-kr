# 자유와혁신 로그 & 아카이브 시스템

## 📋 시스템 개요

이 시스템은 정당의 모든 디지털 활동을 체계적으로 추적, 기록, 보관하기 위한 종합 관리 시스템입니다. 투명성과 책임감 있는 정당 운영을 위해 모든 사용자 활동과 콘텐츠 변경사항을 안전하게 기록하고 아카이브합니다.

## 🎯 주요 목적

1. **투명성 확보**: 모든 관리자 활동과 콘텐츠 변경사항을 투명하게 기록
2. **데이터 보존**: 중요한 정당 자료와 활동 기록의 영구 보존
3. **감사 추적**: 언제, 누가, 무엇을, 왜 했는지에 대한 완전한 추적
4. **백업 및 복원**: 데이터 손실 방지를 위한 체계적인 백업 시스템
5. **검색 및 분석**: 축적된 데이터를 통한 패턴 분석 및 개선점 도출

## 🏗 시스템 구조

```
party-website/
├── _logs/                      # 로그 파일 저장소
│   ├── daily/                  # 일일 활동 로그
│   ├── uploads/                # 파일 업로드 로그
│   ├── content/                # 콘텐츠 변경 로그
│   └── admin/                  # 관리자 활동 로그
├── archive/                    # 아카이브 저장소
│   ├── images/                 # 이미지 파일 아카이브
│   ├── documents/              # 문서 파일 아카이브
│   ├── backups/                # 정기 백업 파일
│   ├── metadata/               # 메타데이터 및 인덱스
│   └── README.md              # 아카이브 시스템 가이드
├── admin/                      # 관리자 도구
│   ├── archive-manager.html   # 아카이브 관리 인터페이스
│   ├── log-viewer.html        # 로그 뷰어 인터페이스
│   ├── config.yml             # Netlify CMS 설정
│   └── index.html             # CMS 관리자 페이지
└── js/                         # JavaScript 시스템
    ├── log-manager.js          # 자동 로깅 시스템
    └── archive-manager.js      # 아카이브 관리 시스템
```

## 🔧 주요 기능

### 1. 자동 로깅 시스템 (`js/log-manager.js`)

**추적하는 활동:**
- 페이지 방문 및 조회
- 링크 클릭 및 버튼 클릭
- 폼 제출 및 데이터 입력
- 파일 업로드 및 다운로드
- 세션 시작/종료
- 사용자 상호작용 패턴

**로그 데이터 구조:**
```json
{
  "type": "page_view",
  "timestamp": "2025-01-20T10:30:00.000Z",
  "sessionId": "session_20250120_001",
  "page": "/news.html",
  "userAgent": "Mozilla/5.0...",
  "screenResolution": "1920x1080"
}
```

### 2. 아카이브 관리 시스템 (`js/archive-manager.js`)

**관리 기능:**
- 파일 자동 분류 및 인덱싱
- 메타데이터 추출 및 저장
- 중복 파일 감지 및 관리
- 태그 및 검색 기능
- 백업 및 복원 기능

**지원하는 파일 형식:**
- 이미지: JPG, PNG, GIF, WebP
- 문서: PDF, DOC, DOCX, TXT, MD
- 미디어: MP4, AVI, MOV, MP3, WAV
- 압축: ZIP, RAR, 7Z

### 3. 관리자 인터페이스

#### 아카이브 관리자 (`/admin/archive-manager.html`)
- 📊 **통계 대시보드**: 파일 수, 용량, 카테고리별 현황
- 📤 **파일 업로드**: 드래그 앤 드롭 인터페이스
- 🔍 **검색 및 필터**: 파일명, 태그, 카테고리별 검색
- 💾 **백업 관리**: 전체/부분 백업 생성 및 복원
- 📋 **메타데이터 관리**: 파일 정보 수정 및 태그 관리

#### 로그 뷰어 (`/admin/log-viewer.html`)
- 📈 **실시간 모니터링**: 사용자 활동 실시간 추적
- 🔍 **로그 검색**: 시간, 유형, 내용별 필터링
- 📊 **통계 분석**: 세션 통계 및 활동 패턴 분석
- 📥 **로그 내보내기**: CSV, JSON 형식으로 내보내기
- 📋 **보고서 생성**: 활동 요약 보고서 자동 생성

## 📋 사용법

### 1. 시스템 초기화

1. 웹사이트 첫 방문 시 자동으로 로깅 시스템이 활성화됩니다
2. `/admin/archive-manager.html`에서 아카이브 시스템을 초기화합니다

### 2. 일반 사용자

- **자동 추적**: 모든 활동이 자동으로 기록됩니다 (개인정보는 수집하지 않음)
- **개인정보 보호**: IP 주소나 개인 식별 정보는 저장하지 않습니다

### 3. 관리자

#### 아카이브 관리
```bash
# 1. 아카이브 관리자 접속
https://yoursite.com/admin/archive-manager.html

# 2. 파일 업로드
- 드래그 앤 드롭으로 파일 업로드
- 자동 분류 및 메타데이터 생성

# 3. 백업 생성
- "백업 생성" 버튼 클릭
- JSON 형식으로 다운로드
```

#### 로그 모니터링
```bash
# 1. 로그 뷰어 접속
https://yoursite.com/admin/log-viewer.html

# 2. 실시간 모니터링
- 자동 업데이트 활성화
- 필터링 및 검색

# 3. 보고서 생성
- "분석 보고서 생성" 클릭
- 통계 및 패턴 분석 결과 다운로드
```

### 4. 개발자 도구

브라우저 콘솔에서 사용 가능한 명령어:

```javascript
// 로그 다운로드
downloadLogs()

// 세션 통계 확인
getSessionStats()

// 로그 초기화
clearLogs()

// 백업 생성
createBackup()

// 아카이브 통계 확인
getArchiveStats()
```

## 🔒 보안 및 개인정보 보호

### 수집하는 정보
- 페이지 방문 패턴 (익명화)
- 파일 업로드/다운로드 활동
- 버튼 클릭 및 폼 제출
- 기술적 정보 (화면 해상도, 브라우저 정보)

### 수집하지 않는 정보
- 개인 식별 정보 (이름, 연락처 등)
- IP 주소
- 쿠키나 추적 픽셀
- 입력한 실제 데이터 내용

### 데이터 보호
- 로컬 브라우저 저장소 사용 (서버 전송 최소화)
- 정기적 자동 삭제 (30일 후)
- 암호화되지 않은 민감 정보 제외
- GDPR 및 개인정보보호법 준수

## 🔧 기술적 세부사항

### 시스템 요구사항
- **브라우저**: Chrome 80+, Firefox 75+, Safari 13+, Edge 80+
- **저장소**: 로컬 스토리지 5MB 이상
- **JavaScript**: ES6+ 지원 필수
- **권한**: 파일 다운로드 권한

### 의존성
- **Tailwind CSS**: UI 프레임워크
- **Font Awesome**: 아이콘
- **Netlify CMS**: 콘텐츠 관리
- **Git**: 버전 관리 및 백업

### 성능 최적화
- 비동기 로깅으로 사용자 경험 방해 최소화
- 배치 처리를 통한 네트워크 요청 최적화
- 압축 및 중복 제거를 통한 저장 공간 효율화

## 📊 데이터 구조

### 로그 엔트리
```json
{
  "type": "활동_유형",
  "timestamp": "ISO_8601_시간",
  "sessionId": "세션_식별자",
  "page": "페이지_경로",
  "data": {
    "구체적_활동_데이터": "값"
  }
}
```

### 아카이브 메타데이터
```json
{
  "fileId": "고유_파일_식별자",
  "name": "파일명.확장자",
  "category": "파일_카테고리",
  "addedAt": "추가_시간",
  "metadata": {
    "uploader": "업로더_정보",
    "tags": ["태그1", "태그2"],
    "description": "파일_설명"
  }
}
```

## 🔄 유지보수 및 관리

### 정기 작업 (권장)

#### 주간
- [ ] 로그 파일 검토 및 정리
- [ ] 새로운 아카이브 파일 분류
- [ ] 시스템 성능 점검

#### 월간
- [ ] 전체 백업 생성
- [ ] 월간 활동 보고서 생성
- [ ] 불필요한 임시 파일 정리

#### 분기별
- [ ] 시스템 보안 점검
- [ ] 저장 공간 최적화
- [ ] 사용자 피드백 반영

### 문제 해결

#### 로그가 기록되지 않는 경우
1. 브라우저 콘솔에서 JavaScript 오류 확인
2. 로컬 스토리지 용량 확인
3. 브라우저 호환성 확인

#### 아카이브 파일이 업로드되지 않는 경우
1. 파일 크기 제한 (100MB) 확인
2. 지원되는 파일 형식 확인
3. 브라우저 권한 설정 확인

#### 백업이 생성되지 않는 경우
1. 다운로드 폴더 쓰기 권한 확인
2. 팝업 차단 해제
3. 충분한 디스크 공간 확인

## 📞 지원 및 문의

- **기술 문의**: IT 관리팀
- **시스템 개선 제안**: 개발팀
- **사용법 문의**: 사용자 가이드 참조

## 📚 관련 문서

- [Netlify CMS 가이드](https://www.netlifycms.org/docs/)
- [Git 사용법](https://git-scm.com/doc)
- [JavaScript 개발 가이드](https://developer.mozilla.org/en-US/docs/Web/JavaScript)

---

**마지막 업데이트**: 2025년 1월 20일  
**시스템 버전**: 1.0  
**문서 버전**: 1.0 