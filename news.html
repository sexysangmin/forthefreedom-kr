<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO 메타 태그 -->
    <title>자유와혁신당 소식 | 황교안신당 자혁당 자유당 최신 뉴스</title>
    <meta name="description" content="황교안 자유와혁신당(자혁당, 자유당) 최신 소식과 뉴스. 황교안신당의 정책 발표, 당 활동, 공지사항, 보도자료, 언론보도를 실시간으로 확인하세요.">
    <meta name="keywords" content="자유와혁신당 소식, 황교안신당 뉴스, 자혁당 소식, 자유당 뉴스, 황교안 발표, 정책 뉴스, 당 활동, 보도자료, 공지사항">
    <meta name="author" content="자유와혁신당">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://forthefreedom.kr/news.html">
    
    <!-- Open Graph 메타 태그 -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="자유와혁신당 소식 | 황교안신당 자혁당 자유당 최신 뉴스">
    <meta property="og:description" content="황교안 자유와혁신당(자혁당, 자유당) 최신 소식과 뉴스. 황교안신당의 정책 발표, 당 활동, 공지사항, 보도자료를 실시간으로 확인하세요.">
    <meta property="og:url" content="https://forthefreedom.kr/news.html">
    <meta property="og:site_name" content="자유와혁신당">
    <meta property="og:image" content="https://forthefreedom.kr/images/surrouding-pic.jpg">
    
    <!-- Twitter Card 메타 태그 -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="자유와혁신당 소식 | 황교안신당 자혁당 자유당 최신 뉴스">
    <meta name="twitter:description" content="황교안 자유와혁신당(자혁당, 자유당) 최신 소식과 뉴스. 황교안신당의 정책 발표, 당 활동, 공지사항, 보도자료를 실시간으로 확인하세요.">
    <meta name="twitter:image" content="https://forthefreedom.kr/images/surrouding-pic.jpg">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'red-600': '#A50034',
                        'red-700': '#8B002C',
                        'red-800': '#700024',
                        'red-900': '#56001C',
                        'red-50': '#FDF2F4',
                        'red-100': '#FCE7EA',
                        'red-500': '#A50034'
                    }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <div id="navigation-container"></div>
    
    <!-- Hero Section -->
    <section class="hero-section" style="position:relative; height:60vh; display:flex; align-items:center; justify-content:center; background:url('images/surrouding-pic.jpg') center/cover no-repeat;">
        <div class="hero-overlay" style="position:absolute; top:0; left:0; right:0; bottom:0; background:linear-gradient(to top, rgba(0,0,0,0.7), rgba(0,0,0,0.2)); z-index:1;"></div>
        <div class="hero-content" style="position:relative; z-index:2; color:#fff; text-align:center;">
            <h1 style="font-size:3.5rem; font-weight:bold; margin:0; text-shadow:2px 2px 4px rgba(0,0,0,0.5);">정당소식</h1>
            <p style="font-size:1.25rem; margin-top:1rem; opacity:0.9;">자유와혁신의 최신 소식을 확인하세요</p>
        </div>
    </section>

    <main style="position:relative; z-index:1; background:#fff;">
        <!-- 카테고리 개요 Section -->
        <section class="py-16 bg-white">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-16">
                    <h2 class="text-4xl font-bold text-gray-900 mb-6">소식 카테고리</h2>
                    <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                        자유와혁신의 다양한 소식을 카테고리별로 확인하세요
                    </p>
                </div>
                
                <div class="grid lg:grid-cols-3 gap-8">
                    <!-- 공지사항 -->
                    <div class="bg-red-50 border border-red-100 rounded-lg p-8 text-center hover:shadow-lg transition-shadow">
                        <div class="w-16 h-16 bg-red-600 rounded-full flex items-center justify-center mx-auto mb-6">
                            <i class="fas fa-bullhorn text-white text-2xl"></i>
                        </div>
                        <h3 class="text-2xl font-semibold text-gray-900 mb-4">공지사항</h3>
                        <p class="text-gray-600 mb-6 leading-relaxed">
                            당의 주요 공지사항과 중요한 알림을 확인하세요
                        </p>
                        <a href="news/notices.html" class="inline-flex items-center justify-center px-6 py-3 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 transition-colors">
                            <span>바로가기</span>
                            <i class="fas fa-arrow-right ml-2"></i>
                        </a>
                    </div>
                    
                    <!-- 보도자료 -->
                    <div class="bg-blue-50 border border-blue-100 rounded-lg p-8 text-center hover:shadow-lg transition-shadow">
                        <div class="w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center mx-auto mb-6">
                            <i class="fas fa-newspaper text-white text-2xl"></i>
                        </div>
                        <h3 class="text-2xl font-semibold text-gray-900 mb-4">보도자료</h3>
                        <p class="text-gray-600 mb-6 leading-relaxed">
                            언론을 통해 발표한 정책과 입장을 확인하세요
                        </p>
                        <a href="news/press-releases.html" class="inline-flex items-center justify-center px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors">
                            <span>바로가기</span>
                            <i class="fas fa-arrow-right ml-2"></i>
                        </a>
                    </div>
                    
                    <!-- 활동소식 -->
                    <div class="bg-green-50 border border-green-100 rounded-lg p-8 text-center hover:shadow-lg transition-shadow">
                        <div class="w-16 h-16 bg-green-600 rounded-full flex items-center justify-center mx-auto mb-6">
                            <i class="fas fa-users text-white text-2xl"></i>
                        </div>
                        <h3 class="text-2xl font-semibold text-gray-900 mb-4">활동소식</h3>
                        <p class="text-gray-600 mb-6 leading-relaxed">
                            현장 활동과 당원들의 다양한 활동을 확인하세요
                        </p>
                        <a href="news/activities.html" class="inline-flex items-center justify-center px-6 py-3 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 transition-colors">
                            <span>바로가기</span>
                            <i class="fas fa-arrow-right ml-2"></i>
                        </a>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- 최신 소식 Section -->
        <section class="py-16 bg-gray-50">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-16">
                    <h2 class="text-4xl font-bold text-gray-900 mb-6">최신 소식</h2>
                    <p class="text-xl text-gray-600">
                        가장 최근 업데이트된 소식들을 확인하세요
                    </p>
                </div>
                
                <!-- 로딩 상태 -->
                <div id="latest-news-loading" class="text-center py-12">
                    <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-red-600"></div>
                    <p class="mt-4 text-gray-600">최신 소식을 불러오는 중...</p>
                </div>

                <!-- 에러 상태 -->
                <div id="latest-news-error" class="text-center py-12 hidden">
                    <div class="text-red-600 mb-4">
                        <i class="fas fa-exclamation-triangle text-4xl"></i>
                    </div>
                    <h3 class="text-xl font-bold text-gray-900 mb-4">최신 소식을 불러올 수 없습니다</h3>
                    <p class="text-gray-600 mb-6">네트워크 오류가 발생했습니다. 잠시 후 다시 시도해주세요.</p>
                    <button onclick="loadLatestNews()" class="px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors">
                        다시 시도
                    </button>
                </div>

                <!-- 빈 상태 -->
                <div id="latest-news-empty" class="text-center py-16 hidden">
                    <div class="text-gray-400 mb-4">
                        <i class="fas fa-newspaper text-6xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-4">등록된 최신 소식이 없습니다</h3>
                    <p class="text-gray-600">새로운 소식이 등록되면 여기에 표시됩니다.</p>
                </div>
                
                <!-- 최신 소식 카드들 -->
                <div id="latest-news-content" class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 hidden">
                    <!-- 동적으로 생성되는 카드들 -->
                </div>
            </div>
        </section>
    </main>
    
    <script src="nav.js"></script>
    <script>
        loadNavigation();

        // 환경 감지 및 API 설정
        const isLocalhost = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';
        const API_BASE = isLocalhost 
            ? 'http://localhost:9000/api'
            : 'https://web-production-d30c83e5.up.railway.app/api';

        // 페이지 로드시 최신 소식 불러오기
        document.addEventListener('DOMContentLoaded', function() {
            loadLatestNews();
        });

        // 최신 소식 불러오기
        async function loadLatestNews() {
            try {
                showLoading();

                // 각 카테고리별 최신 1개씩 병렬로 요청
                const [noticesResponse, pressResponse, activitiesResponse] = await Promise.all([
                    fetch(`${API_BASE}/notices?limit=1&sortBy=createdAt&sortOrder=desc`),
                    fetch(`${API_BASE}/press-releases?limit=1&sortBy=createdAt&sortOrder=desc`),
                    fetch(`${API_BASE}/activities?limit=1&sortBy=eventDate&sortOrder=desc`)
                ]);

                const [noticesData, pressData, activitiesData] = await Promise.all([
                    noticesResponse.json(),
                    pressResponse.json(),
                    activitiesResponse.json()
                ]);

                // 최신 소식 렌더링
                renderLatestNews(noticesData, pressData, activitiesData);
                hideLoading();

            } catch (error) {
                console.error('최신 소식 로드 실패:', error);
                showError();
                hideLoading();
            }
        }

        // 최신 소식 렌더링
        function renderLatestNews(noticesData, pressData, activitiesData) {
            const container = document.getElementById('latest-news-content');
            container.innerHTML = '';

            let hasContent = false;

            // 공지사항 카드
            if (noticesData.success && noticesData.data && noticesData.data.length > 0) {
                const notice = noticesData.data[0];
                container.appendChild(createNewsCard({
                    type: 'notice',
                    title: '공지사항',
                    icon: 'fas fa-bullhorn',
                    bgGradient: 'bg-gradient-to-r from-red-500 to-red-600',
                    badgeStyle: 'bg-red-100 text-red-800',
                    linkStyle: 'text-red-600 hover:text-red-700',
                    linkUrl: `news/notice-detail.html?id=${notice._id}`,
                    listUrl: 'news/notices.html',
                    data: notice,
                    dateField: 'createdAt'
                }));
                hasContent = true;
            } else {
                container.appendChild(createEmptyCard({
                    type: 'notice',
                    title: '공지사항',
                    icon: 'fas fa-bullhorn',
                    bgGradient: 'bg-gradient-to-r from-red-500 to-red-600',
                    badgeStyle: 'bg-red-100 text-red-800',
                    linkStyle: 'text-red-600 hover:text-red-700',
                    linkUrl: 'news/notices.html',
                    message: '등록된 공지사항이 없습니다'
                }));
            }

            // 보도자료 카드
            if (pressData.success && pressData.data && pressData.data.length > 0) {
                const press = pressData.data[0];
                container.appendChild(createNewsCard({
                    type: 'press',
                    title: '보도자료',
                    icon: 'fas fa-newspaper',
                    bgGradient: 'bg-gradient-to-r from-blue-500 to-blue-600',
                    badgeStyle: 'bg-blue-100 text-blue-800',
                    linkStyle: 'text-blue-600 hover:text-blue-700',
                    linkUrl: `news/press-release-detail.html?id=${press._id}`,
                    listUrl: 'news/press-releases.html',
                    data: press,
                    dateField: 'releaseDate'
                }));
                hasContent = true;
            } else {
                container.appendChild(createEmptyCard({
                    type: 'press',
                    title: '보도자료',
                    icon: 'fas fa-newspaper',
                    bgGradient: 'bg-gradient-to-r from-blue-500 to-blue-600',
                    badgeStyle: 'bg-blue-100 text-blue-800',
                    linkStyle: 'text-blue-600 hover:text-blue-700',
                    linkUrl: 'news/press-releases.html',
                    message: '등록된 보도자료가 없습니다'
                }));
            }

            // 활동소식 카드
            if (activitiesData.success && activitiesData.data && activitiesData.data.length > 0) {
                const activity = activitiesData.data[0];
                container.appendChild(createNewsCard({
                    type: 'activity',
                    title: '활동소식',
                    icon: 'fas fa-users',
                    bgGradient: 'bg-gradient-to-r from-green-500 to-green-600',
                    badgeStyle: 'bg-green-100 text-green-800',
                    linkStyle: 'text-green-600 hover:text-green-700',
                    linkUrl: `news/activity-detail.html?id=${activity._id}`,
                    listUrl: 'news/activities.html',
                    data: activity,
                    dateField: 'eventDate'
                }));
                hasContent = true;
            } else {
                container.appendChild(createEmptyCard({
                    type: 'activity',
                    title: '활동소식',
                    icon: 'fas fa-users',
                    bgGradient: 'bg-gradient-to-r from-green-500 to-green-600',
                    badgeStyle: 'bg-green-100 text-green-800',
                    linkStyle: 'text-green-600 hover:text-green-700',
                    linkUrl: 'news/activities.html',
                    message: '등록된 활동소식이 없습니다'
                }));
            }

            // 내용이 있으면 표시, 없으면 빈 상태 표시
            if (hasContent) {
                showContent();
            } else {
                showEmpty();
            }
        }

        // 뉴스 카드 생성
        function createNewsCard(config) {
            const card = document.createElement('div');
            card.className = 'bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-lg transition-shadow';
            
            const date = config.data[config.dateField] || config.data.createdAt;
            
            card.innerHTML = `
                <div class="${config.bgGradient} h-2"></div>
                <div class="p-6">
                    <div class="flex items-start justify-between mb-3">
                        <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${config.badgeStyle}">
                            <i class="${config.icon} mr-2"></i>${config.title}
                        </span>
                        <span class="text-gray-500 text-sm">${formatDate(date)}</span>
                    </div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-3">${config.data.title}</h3>
                    <p class="text-gray-600 text-sm mb-4 leading-relaxed">
                        ${config.data.excerpt || config.data.content.substring(0, 80) + '...'}
                    </p>
                    <a href="${config.linkUrl}" class="${config.linkStyle} font-medium text-sm">자세히 보기 →</a>
                </div>
            `;
            
            return card;
        }

        // 빈 카드 생성
        function createEmptyCard(config) {
            const card = document.createElement('div');
            card.className = 'bg-white border border-gray-200 rounded-lg overflow-hidden';
            
            card.innerHTML = `
                <div class="${config.bgGradient} h-2"></div>
                <div class="p-6">
                    <div class="flex items-center justify-center mb-3">
                        <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${config.badgeStyle}">
                            <i class="${config.icon} mr-2"></i>${config.title}
                        </span>
                    </div>
                    <div class="text-center py-8">
                        <div class="text-gray-400 mb-3">
                            <i class="${config.icon} text-3xl"></i>
                        </div>
                        <p class="text-gray-500 text-sm mb-4">${config.message}</p>
                        <a href="${config.linkUrl}" class="${config.linkStyle} font-medium text-sm">전체 보기 →</a>
                    </div>
                </div>
            `;
            
            return card;
        }

        // 날짜 포맷팅
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('ko-KR', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit'
            });
        }

        // UI 상태 관리 함수들
        function showLoading() {
            document.getElementById('latest-news-loading').classList.remove('hidden');
            document.getElementById('latest-news-content').classList.add('hidden');
            document.getElementById('latest-news-error').classList.add('hidden');
            document.getElementById('latest-news-empty').classList.add('hidden');
        }

        function hideLoading() {
            document.getElementById('latest-news-loading').classList.add('hidden');
        }

        function showContent() {
            document.getElementById('latest-news-content').classList.remove('hidden');
        }

        function showError() {
            document.getElementById('latest-news-error').classList.remove('hidden');
            document.getElementById('latest-news-content').classList.add('hidden');
            document.getElementById('latest-news-empty').classList.add('hidden');
        }

        function showEmpty() {
            document.getElementById('latest-news-empty').classList.remove('hidden');
            document.getElementById('latest-news-content').classList.add('hidden');
        }
    </script>
</body>
</html> 

